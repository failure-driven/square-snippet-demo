<script>
  import Auth from "./Auth.svelte";
  import {authWidgetUrl} from "../services/siteConfig";

  let auth = JSON.parse(localStorage.getItem("swifAuth"));

  const logout = () => {
    localStorage.setItem("swifAuth", null);
    auth = JSON.parse(localStorage.getItem("swifAuth"));
  };
  const authenticate = () => {
    const windowFeatures =
      "location=yes,resizable=yes,scrollbars=yes,status=yes,width=640,height=480";
    window.open(authWidgetUrl(), "Swif Auth", windowFeatures);
  };

  const refresh = () => {
    location.reload();
  };
</script>

<div class="content-panel">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 286.92 326.45"
    ><defs
      ><style>
        .cls-1 {
          fill: #6706bc;
        }
      </style></defs
    ><g id="Layer_2" data-name="Layer 2"
      ><g id="Layer_1-2" data-name="Layer 1"
        ><path
          class="cls-1"
          d="M77.28,222.56c-5.35-5.47-14.1-9.42-26.5-12.09-2-.4-4-.75-5.77-1-6.57-1.13-11.33-1.93-11.33-6,0-6,7.54-6,11.59-6,8.13,0,18.42,3.67,26,9.16a9.11,9.11,0,0,0,.75-.53c3.05-2.3,9.5-8.88,9.5-15.58a10.08,10.08,0,0,0-.1-1.47c-.45-4.36-3-7.82-7.88-10.53-6.33-3.55-16-5.35-28.69-5.35-19.48,0-42.71,5.52-42.71,31.83,0,19.94,17.22,25.9,32.21,28.87,1.41.29,2.77.52,4,.76,6.55,1.18,11.73,2.11,11.73,6.72,0,6-7.74,6-11.9,6-9.41,0-22.15-4.79-29-9.37C7,239.36,0,246.64,0,253.07c0,5.61,2.49,9.85,7.59,13,6.21,3.73,16.51,5.62,30.6,5.62,29.09,0,44-9.61,45.44-29.31.08-1.07.13-2.16.13-3.29A22.5,22.5,0,0,0,77.28,222.56Zm132.22-14.9a17.89,17.89,0,0,0-5.46-.72h-3.21a14.21,14.21,0,0,0-6.4,1.27l-5.77,18.84v31.34c0,9.3,3.72,13.26,12.44,13.26h3.21c4.5,0,7.68-1.3,9.6-4,1.55-2.16,2.3-5.22,2.3-9.25v-38.2C216.21,213.09,214.21,209.16,209.5,207.66Zm5.6-27.19c-2.31-3.66-6.8-5.75-12.8-5.75-8.82,0-14.32,4.72-14.32,12.31v.05a21.64,21.64,0,0,1,8,6.57c1.4,1.93,1.91,3.48,1.54,4.6l-.14.47a19.54,19.54,0,0,0,5.24.64,18.41,18.41,0,0,0,6.93-1.22c4.68-1.84,7.39-5.76,7.39-11.11A12,12,0,0,0,215.1,180.47Zm-26.27,11.26a21.18,21.18,0,0,0-12.24-3.7c-4,0-13.47,1.47-15.81,15.15L155.42,238l-8-33.21c-1.34-6.54-8.51-9.93-14.89-9.93-3.12,0-13.43.7-15.29,9.87l-8,33.08-5.56-34.08c-2.57-14-11.91-15.53-15.8-15.53a25.83,25.83,0,0,0-3,.18,16.29,16.29,0,0,1,.14,2.12c0,9.08-8.52,16.89-12,19.13l2.14,6.68c8.1,5.65,12.07,13.21,12.07,22.77A42,42,0,0,1,86,249.83l3.49,10.86c2.3,7.89,6.93,11,16.52,11,9.88,0,15.42-3.48,17.44-10.92l8.32-33.12,9,33.12c2.27,7.74,7.2,10.92,17.05,10.92,9.51,0,14.69-3.38,16.77-10.94L194,197.45l0,0C193.71,196.5,192,194,188.83,191.73Zm98.09-2.46V190c0,9.12-4.41,12.83-15.26,12.83H242.11V216.7h19.6c13.41,0,15.26,5.53,15.26,11.49v.45c0,8.8-4.42,12.38-15.26,12.38H243.63v15.37c0,10.13-4.83,15.26-14.35,15.26h-6a12.59,12.59,0,0,1-6.59-1.68c1.93-2.55,3.15-6.26,3.15-11.58v-38.2c0-9.17-3.38-14.54-10.3-16.24v-2c6.84-2.11,11-7.51,11-14.93a15.37,15.37,0,0,0-2.36-8.42,19.75,19.75,0,0,1,8.31-1.58h45.24C282.51,177,286.92,180.58,286.92,189.27ZM9.06,315.85a2.22,2.22,0,0,1,1.6-1.87,8,8,0,0,0,6.63,3.36c3.06,0,4.79-1.26,4.79-3.43,0-2.48-2.58-3.06-5.51-3.74-3.4-.78-6.93-2-6.93-6.43,0-3.74,3.23-6.39,7.92-6.39a10,10,0,0,1,6.22,1.8,2.94,2.94,0,0,1,1.33,2.11,2.32,2.32,0,0,1-1.64,1.94,7.19,7.19,0,0,0-5.88-3c-2.75,0-4.55,1.33-4.55,3.37,0,2.41,2.14,2.79,5.2,3.5,3.74.85,7.34,2.31,7.34,6.56,0,4.05-3.13,6.56-8.26,6.56-3.4,0-5.81-1.05-7.14-2.28A3.07,3.07,0,0,1,9.06,315.85ZM44,310.1v8.23c0,1.22-.65,1.6-1.5,1.6h-.37c-.89,0-1.5-.38-1.5-1.6v-7.85c0-2.83-1.43-4.49-3.77-4.49-2.79,0-4.59,1.83-4.59,4.79v7.55c0,1.22-.65,1.6-1.5,1.6h-.37c-.89,0-1.5-.38-1.5-1.6V296.81a1.69,1.69,0,0,1,1.23-.38c1,0,2.14.55,2.14,2.89V306a6.15,6.15,0,0,1,5.4-3C42,303,44,306,44,310.1ZM55.57,303a8.6,8.6,0,0,1,0,17.2,8.6,8.6,0,0,1,0-17.2Zm0,2.75a5.5,5.5,0,0,0-5.48,5.82,5.56,5.56,0,0,0,5.48,5.88A5.49,5.49,0,0,0,61,311.67C61,308.27,58.7,305.78,55.54,305.78ZM84,311.6c0,5.13-3.23,8.63-7.75,8.63a6.32,6.32,0,0,1-5.61-3.06v7.69c0,1.22-.64,1.59-1.49,1.59h-.38c-.88,0-1.49-.37-1.49-1.59V303.64a1.67,1.67,0,0,1,1.22-.37,2,2,0,0,1,2,1.87,6.29,6.29,0,0,1,.1.95A6.53,6.53,0,0,1,76.34,303C80.73,303,84,306.4,84,311.6Zm-3.26,0c0-3.4-2.11-5.81-5-5.81a5.21,5.21,0,0,0-5.1,3.4v3.43a4.88,4.88,0,0,0,5,4.79C78.69,317.44,80.73,315.1,80.73,311.63Zm16.22,7-5.14-20a2.19,2.19,0,0,1,2.08-1c.92,0,1.7.54,2,2l3.57,16.18L103.68,302a2,2,0,0,1,2.31-1.59A2.08,2.08,0,0,1,108.3,302l4.12,13.77,3.63-16.15c.31-1.42,1-2,1.94-2,1.29,0,2,.81,2,1l-5.06,20c-.24,1-.89,1.4-2.38,1.4s-2-.41-2.28-1.43L106,304.39l-4.45,14.21c-.27,1-.85,1.43-2.21,1.43S97.19,319.69,97,318.63Zm28.66-22.4a2,2,0,1,1,0,3.91,1.82,1.82,0,0,1-2-1.94A1.84,1.84,0,0,1,125.61,296.23Zm-1.77,8.67c0-1.22.65-1.63,1.53-1.63h.34c.89,0,1.5.37,1.5,1.63v13.43c0,1.22-.61,1.6-1.5,1.6h-.34c-.88,0-1.53-.38-1.53-1.6Zm8.91,9.93v-8.64h-1.19c-1.05,0-1.46-.44-1.46-1.26v-.23c0-.82.41-1.26,1.46-1.26h1.19v-2.52c0-1.15.58-1.6,1.5-1.6h.34c.88,0,1.46.34,1.46,1.6v2.52h3.7c1.06,0,1.43.41,1.43,1.22v.24c0,.85-.41,1.29-1.46,1.29H136v8.26c0,2,.58,3,2.18,3a2.77,2.77,0,0,0,2.31-1.16c.1-.1.95.38.95,1.43a2.06,2.06,0,0,1-.71,1.5,4.65,4.65,0,0,1-3.09,1C134.28,320.23,132.75,318.36,132.75,314.83Zm26.48-4.73v8.23c0,1.22-.64,1.6-1.49,1.6h-.38c-.88,0-1.49-.38-1.49-1.6v-7.85c0-2.83-1.43-4.49-3.78-4.49-2.78,0-4.59,1.83-4.59,4.79v7.55c0,1.22-.64,1.6-1.49,1.6h-.38c-.88,0-1.49-.38-1.49-1.6V296.81a1.66,1.66,0,0,1,1.22-.38c1,0,2.14.55,2.14,2.89V306a6.15,6.15,0,0,1,5.41-3C157.23,303,159.23,306,159.23,310.1Zm10-10.33a1.82,1.82,0,0,1,1.87-2H183c1.09,0,1.63.51,1.63,1.43v.21c0,.95-.54,1.46-1.63,1.46H172.73v7h7.62c1.12,0,1.63.51,1.63,1.4v.13c0,.95-.54,1.43-1.63,1.43H172.8v7.48c0,1.05-.51,1.6-1.53,1.6h-.54c-1,0-1.47-.65-1.47-1.84Zm28.36,5.44c0,1.29-1,1.8-1,1.73a3.16,3.16,0,0,0-2.07-.71c-2.66,0-3.71,2.58-3.71,6.35v5.75c0,1.22-.65,1.6-1.5,1.6H189c-.88,0-1.5-.38-1.5-1.6V303.64a1.71,1.71,0,0,1,1.23-.37,1.92,1.92,0,0,1,2,1.63,5.94,5.94,0,0,1,.14,1.22,4.13,4.13,0,0,1,4.14-3.09C196.63,303,197.62,303.85,197.62,305.21Zm4.39-9a2,2,0,1,1-2,2A1.84,1.84,0,0,1,202,296.23Zm-1.77,8.67c0-1.22.64-1.63,1.53-1.63h.34c.88,0,1.49.37,1.49,1.63v13.43c0,1.22-.61,1.6-1.49,1.6h-.34c-.89,0-1.53-.38-1.53-1.6ZM215.3,303c4.72,0,7.85,3.33,7.85,8.23v.27c0,.71-.24,1-1,1H210.06a4.36,4.36,0,0,0,.07.62,5.32,5.32,0,0,0,5.51,4.45,5.38,5.38,0,0,0,5.13-2.72c.07-.07,1.77.24,1.77,1.67a3.28,3.28,0,0,1-1.8,2.38,9.77,9.77,0,0,1-5.17,1.32c-5.17,0-8.63-3.43-8.63-8.53S210.47,303,215.3,303Zm0,2.55a5.22,5.22,0,0,0-5.17,4.66h9.79C219.72,307.42,218,305.58,215.27,305.58ZM241.38,310v8.3c0,1.22-.65,1.6-1.5,1.6h-.37c-.89,0-1.5-.38-1.5-1.6v-7.89c0-2.75-1.39-4.45-3.77-4.45a4.93,4.93,0,0,0-4.59,2.85v9.49c0,1.22-.65,1.6-1.5,1.6h-.37c-.89,0-1.5-.38-1.5-1.6V303.64a1.71,1.71,0,0,1,1.23-.37c.91,0,2,.47,2.1,2.65a6.35,6.35,0,0,1,5.44-2.89C239.37,303,241.38,306,241.38,310Zm3,1.6c0-5.17,3.23-8.6,7.75-8.6a6.58,6.58,0,0,1,5.61,2.69v-8.91a1.75,1.75,0,0,1,1.22-.38c1.06,0,2.15.55,2.15,2.89v19c0,1.22-.62,1.6-1.5,1.6h-.34c-.88,0-1.5-.38-1.5-1.6v-1.26a6.53,6.53,0,0,1-5.74,3.16C247.63,320.23,244.37,316.8,244.37,311.63Zm13.39-2.45a5.1,5.1,0,0,0-5-3.36c-3.06,0-5.1,2.31-5.1,5.81s2.11,5.81,5,5.81a4.92,4.92,0,0,0,5.1-4.79Zm6.3,7.55a1.72,1.72,0,0,1,1.32-1.53,6.76,6.76,0,0,0,5.51,2.45c2.31,0,3.6-.85,3.6-2.21,0-1.67-1.53-2-4.21-2.55-2.42-.51-5.75-1.26-5.75-4.73,0-3.06,2.55-5.13,6.53-5.13,3.13,0,5.1,1,5.88,2.14a2,2,0,0,1,.41,1.16,1.79,1.79,0,0,1-1.36,1.56,5.92,5.92,0,0,0-4.8-2.31c-2.31,0-3.53.88-3.53,2.24s1.43,1.84,4.08,2.42,6,1.29,6,4.82c0,3.13-2.59,5.14-6.8,5.14a9.71,9.71,0,0,1-5.61-1.43A2.68,2.68,0,0,1,264.06,316.73ZM123.24,70.35A4.37,4.37,0,0,1,118.87,66V48.29c0-1.68-4.11-4.75-10.84-4.75s-10.84,3.07-10.84,4.75V66a4.37,4.37,0,0,1-8.74,0V48.29c0-7.57,8.6-13.49,19.58-13.49s19.59,5.92,19.59,13.49V66A4.37,4.37,0,0,1,123.24,70.35ZM75.67,158.8a55.53,55.53,0,0,1-11.22-1.11,4.38,4.38,0,0,1-.76-8.28c4.44-1.92,9.51-4.79,11.78-8.57h-.33a14,14,0,0,1-14-15.4l5.79-59a9.93,9.93,0,0,1,9.93-9h52.28a4.37,4.37,0,0,1,0,8.74H76.83a1.21,1.21,0,0,0-1.22,1.08l-5.8,59a5.2,5.2,0,0,0,1.34,4,5.31,5.31,0,0,0,4,1.76h5.92a4.38,4.38,0,0,1,4.38,4.28c.07,3.87-1.2,8.8-6.3,13.6,7.84-.63,16.83-3.81,19.37-14.52a4.36,4.36,0,0,1,4.25-3.36h38.17a5.31,5.31,0,0,0,4-1.75,4.37,4.37,0,0,1,6.46,5.9,14.16,14.16,0,0,1-10.43,4.59H106c-3.52,9.79-11.56,15.82-23.46,17.5A50.75,50.75,0,0,1,75.67,158.8ZM194.1,54.72a4.38,4.38,0,0,1-4.38-4.37V32.65c0-1.67-4.11-4.75-10.83-4.75S168.05,31,168.05,32.65v17.7a4.38,4.38,0,0,1-8.75,0V32.65c0-7.56,8.6-13.49,19.59-13.49s19.58,5.93,19.58,13.49v17.7A4.37,4.37,0,0,1,194.1,54.72Zm17.15,88.45a49.26,49.26,0,0,1-6.89-.47c-11.9-1.68-19.94-7.7-23.46-17.49H146a14.07,14.07,0,0,1-14-15.41l5.8-59a9.92,9.92,0,0,1,9.92-9h62.41a9.93,9.93,0,0,1,9.93,9l5.79,59a14.05,14.05,0,0,1-14,15.41h-.33c2.27,3.77,7.33,6.64,11.78,8.56a4.37,4.37,0,0,1-.76,8.28A55.1,55.1,0,0,1,211.25,143.17ZM147.68,50.54a1.2,1.2,0,0,0-1.22,1.08l-5.8,59h0a5.18,5.18,0,0,0,1.34,4,5.31,5.31,0,0,0,4,1.76h38.17a4.38,4.38,0,0,1,4.25,3.37c2.54,10.7,11.53,13.88,19.36,14.51-5.09-4.79-6.36-9.73-6.29-13.59a4.38,4.38,0,0,1,4.37-4.29h5.93a5.31,5.31,0,0,0,4-1.76,5.18,5.18,0,0,0,1.34-4l-5.8-59a1.2,1.2,0,0,0-1.22-1.08Zm-11.37,59.69h0Zm-8.2-78.1a3.28,3.28,0,0,1-3-.7l-13.84-12a3.3,3.3,0,0,1,4.33-5l13.84,12a3.3,3.3,0,0,1,.32,4.66A3.22,3.22,0,0,1,128.11,32.13Zm9.8-7.91a3.3,3.3,0,0,1-4-2.34L129.11,4.16a3.31,3.31,0,0,1,2.34-4h0a3.3,3.3,0,0,1,4,2.34l4.77,17.72a3.3,3.3,0,0,1-2.34,4Zm12.34,2.07a3.24,3.24,0,0,1-2.12-.15,3.29,3.29,0,0,1-1.76-4.32L153.5,4.91a3.3,3.3,0,0,1,6.08,2.56l-7.13,16.91A3.27,3.27,0,0,1,150.25,26.29Z"
        /></g
      ></g
    ></svg
  >
  <svg
    id="swif-account"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 286.92 98.53"
    ><g id="Layer_2" data-name="Layer 2"
      ><g id="Layer_1-2" data-name="Layer 1"
        ><path
          d="M77.28,49.44C71.93,44,63.18,40,50.78,37.36c-2-.41-4-.76-5.77-1-6.57-1.13-11.33-1.93-11.33-6,0-6,7.54-6,11.59-6,8.13,0,18.42,3.67,26,9.16a9.11,9.11,0,0,0,.75-.53c3.05-2.3,9.5-8.88,9.5-15.57a10.12,10.12,0,0,0-.1-1.48c-.45-4.36-3-7.82-7.88-10.53C67.18,1.8,57.53,0,44.82,0,25.34,0,2.11,5.52,2.11,31.83c0,19.94,17.22,25.9,32.21,28.87,1.41.29,2.77.52,4,.76,6.55,1.19,11.73,2.11,11.73,6.73,0,6-7.74,6-11.9,6-9.41,0-22.15-4.79-29-9.37C7,66.24,0,73.52,0,80c0,5.61,2.49,9.85,7.59,13,6.21,3.73,16.51,5.62,30.6,5.62,29.09,0,44-9.61,45.44-29.31.08-1.07.13-2.16.13-3.29A22.5,22.5,0,0,0,77.28,49.44Z"
        /><path
          d="M209.5,34.54a17.89,17.89,0,0,0-5.46-.72h-3.21a14.35,14.35,0,0,0-6.4,1.27l-5.77,18.84V85.27c0,9.3,3.72,13.26,12.44,13.26h3.21c4.5,0,7.68-1.3,9.6-4,1.55-2.16,2.3-5.22,2.3-9.25V47.07C216.21,40,214.21,36,209.5,34.54Zm5.6-27.18c-2.31-3.67-6.8-5.76-12.8-5.76C193.48,1.6,188,6.32,188,13.91V14a21.64,21.64,0,0,1,8,6.57c1.4,1.93,1.91,3.48,1.54,4.6l-.14.47a19.54,19.54,0,0,0,5.24.64A18.41,18.41,0,0,0,209.5,25c4.68-1.84,7.39-5.76,7.39-11.11A12,12,0,0,0,215.1,7.36Z"
        /><path
          d="M188.83,18.61a21.18,21.18,0,0,0-12.24-3.7c-4,0-13.47,1.48-15.81,15.15l-5.36,34.79-8-33.21c-1.34-6.54-8.51-9.93-14.89-9.93-3.12,0-13.43.7-15.29,9.87l-8,33.08-5.56-34.08c-2.57-14-11.91-15.53-15.8-15.53a25.83,25.83,0,0,0-3,.18,16.57,16.57,0,0,1,.14,2.13c0,9.07-8.52,16.88-12,19.12l2.14,6.68c8.1,5.65,12.07,13.21,12.07,22.77A42,42,0,0,1,86,76.71l3.49,10.86c2.3,7.89,6.93,11,16.52,11,9.88,0,15.42-3.47,17.44-10.92l8.32-33.12,9,33.12c2.27,7.74,7.2,10.92,17.05,10.92,9.51,0,14.69-3.38,16.77-10.94L194,24.34l0-.05C193.71,23.38,192,20.83,188.83,18.61Z"
        /><path
          d="M286.92,16.15v.75c0,9.13-4.41,12.83-15.26,12.83H242.11V43.58h19.6c13.41,0,15.26,5.53,15.26,11.49v.45c0,8.8-4.42,12.38-15.26,12.38H243.63V83.27c0,10.13-4.83,15.26-14.35,15.26h-6a12.68,12.68,0,0,1-6.59-1.67c1.93-2.56,3.15-6.26,3.15-11.59V47.07c0-9.17-3.38-14.53-10.3-16.24v-2c6.84-2.11,11-7.51,11-14.93a15.37,15.37,0,0,0-2.36-8.42,19.75,19.75,0,0,1,8.31-1.58h45.24C282.51,3.91,286.92,7.46,286.92,16.15Z"
        /></g
      ></g
    ></svg
  >
  <div class="swif-account">
    {#if auth}
      <button on:click={logout} class="btn btn-a btn-sm swif-dpurple"
        >Log out</button
      >
    {:else}
      <button on:click={authenticate} class="btn btn-a btn-sm swif-dpurple"
        >Log in</button
      >
    {/if}
  </div>
  <span id="chat-account">Chat (beta)</span>
  <div class="chat-account">
    <Auth />
  </div>
  <button on:click={refresh} class="btn btn-a btn-sm">Refresh</button>
</div>

<style>
  svg {
    margin: 0 6rem;
    margin-bottom: 2rem;
  }

  .btn {
    width: 100%;
  }

  #swif-account {
    fill: #6706bc;
    width: 50px;
    display: inline;
    margin: 0;
    position: relative;
    left: 15;
    top: 10;
    background-color: #dfe0d9;
  }

  .swif-account {
    border-radius: 10px;
    border: 1px solid #6706bc;
    padding: 1rem;
    margin-bottom: 2rem;
  }

  .chat-account {
    margin-bottom: 2rem;
    border-radius: 10px;
    border: 1px solid #fbae17;
    padding: 1rem;
  }

  #chat-account {
    width: fit-content;
    font-weight: 900;
    color: #fbae17;
    fill: #fbae17;
    position: relative;
    left: 15;
    top: 10;
    background-color: #dfe0d9;
  }
</style>
